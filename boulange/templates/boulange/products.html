{% extends "boulange/base.html" %}

{% block title %}Produits{% endblock %}

{% block content %}
<section class="flex three">
  {% for product in products %}
  <article class="card">
    <header>
      <h3>{{ product.ref }}</h3><br/>
      <b>{{ product.name }}{% if not product.active %} (désactivé){% endif %}</b>
    </header>
    <ul>
      {% if product.orig_product %}
      <li>
	Identique à <b>{{ product.orig_product.ref }}</b> avec un coef {{ product.coef }}
	{% if product.nb_units and product.nb_units != 1 %}
	pour {{ product.nb_units }} unités
	{% endif %}
      </li>
      {% endif %}
      {% for line in product.raw_ingredients.all %}
      <li>{{ line.ingredient.name }} : {{ line.quantity|floatformat:2 }} {{ line.ingredient.unit }}</li>
      {% endfor %}
    </ul>
    <p>
      Prix de vente : {{ product.price|floatformat:2 }}€
      <br>
      Prix de revient : {{ product.cost_price|floatformat:2 }}€
      <br>
      Poids pâte : {{ product.weight|floatformat:2 }}g
    </p>
    {% if product.notes %}
    <pre>{{ product.notes }}</pre>
    {% endif %}
  </article>
  {% endfor %}
</section>
{% endblock %}
